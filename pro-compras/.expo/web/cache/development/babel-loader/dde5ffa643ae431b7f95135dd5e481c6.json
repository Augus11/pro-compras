{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Patricia\\\\Desktop\\\\Nueva carpeta\\\\pro-compras\\\\src\\\\components\\\\Search\\\\Search.js\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { Searchbar } from \"react-native-paper\";\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\nimport SearchHistory from \"./SearchHistory\";\nimport { AnimatedIcon, arrowAnimation, inputAnimation, inputAnimationWidth, animatedTransition, animatedTransitionReset } from \"./SearchAnimation\";\nimport { updateSearchHistory } from \"../../api/search\";\nimport colors from \"../../styles/colors\";\nexport default function Search(props) {\n  var currentSearch = props.currentSearch;\n\n  var _useState = useState(currentSearch || \"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchQuery = _useState2[0],\n      setSearchQuery = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showHistory = _useState4[0],\n      setShowHistory = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      containerHeight = _useState6[0],\n      setContainerHeight = _useState6[1];\n\n  var onChangeSearch = function onChangeSearch(query) {\n    return setSearchQuery(query);\n  };\n\n  var navigation = useNavigation();\n  var route = useRoute();\n  useEffect(function () {\n    if (currentSearch !== searchQuery) setSearchQuery(currentSearch);\n  }, [currentSearch]);\n\n  var openSearch = function openSearch() {\n    animatedTransition.start();\n    setShowHistory(!showHistory);\n  };\n\n  var closeSearch = function closeSearch() {\n    animatedTransitionReset.start();\n    Keyboard.dismiss();\n    setShowHistory(!showHistory);\n  };\n\n  var onSearch = function onSearch(reuseSearch) {\n    var isReuse;\n    return _regeneratorRuntime.async(function onSearch$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            isReuse = typeof reuseSearch === \"string\";\n            closeSearch();\n            setSearchQuery(\"\");\n            _context.t0 = !isReuse;\n\n            if (!_context.t0) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(updateSearchHistory(searchQuery));\n\n          case 7:\n            if (route.name === \"search\") {\n              navigation.push(\"search\", {\n                search: isReuse ? reuseSearch : searchQuery\n              });\n            } else {\n              navigation.navigate(\"search\", {\n                search: isReuse ? reuseSearch : searchQuery\n              });\n            }\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    onLayout: function onLayout(e) {\n      return setContainerHeight(e.nativeEvent.layout.height);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.containerInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, React.createElement(AnimatedIcon, {\n    name: \"arrow-left\",\n    size: 20,\n    style: [styles.backArrow, arrowAnimation],\n    onPress: closeSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), React.createElement(Animated.View, {\n    style: [inputAnimation, {\n      width: inputAnimationWidth\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, React.createElement(Searchbar, {\n    placeholder: \"Busca tu producto\",\n    onChangeText: onChangeSearch,\n    value: searchQuery,\n    onFocus: openSearch,\n    onSubmitEditing: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }))), React.createElement(SearchHistory, {\n    showHistory: showHistory,\n    containerHeight: containerHeight,\n    onSearch: onSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: colors.bgDark,\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    zIndex: 1\n  },\n  containerInput: {\n    position: \"relative\",\n    alignItems: \"flex-end\"\n  },\n  backArrow: {\n    position: \"absolute\",\n    left: 0,\n    top: 15,\n    color: colors.fontLight\n  }\n});","map":{"version":3,"sources":["C:/Users/Patricia/Desktop/Nueva carpeta/pro-compras/src/components/Search/Search.js"],"names":["React","useState","useEffect","Searchbar","useNavigation","useRoute","SearchHistory","AnimatedIcon","arrowAnimation","inputAnimation","inputAnimationWidth","animatedTransition","animatedTransitionReset","updateSearchHistory","colors","Search","props","currentSearch","searchQuery","setSearchQuery","showHistory","setShowHistory","containerHeight","setContainerHeight","onChangeSearch","query","navigation","route","openSearch","start","closeSearch","Keyboard","dismiss","onSearch","reuseSearch","isReuse","name","push","search","navigate","styles","container","e","nativeEvent","layout","height","containerInput","backArrow","width","StyleSheet","create","backgroundColor","bgDark","paddingVertical","paddingHorizontal","zIndex","position","alignItems","left","top","color","fontLight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, View, Keyboard, Animated } from \"react-native\";\nimport { Searchbar } from \"react-native-paper\";\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\nimport SearchHistory from \"./SearchHistory\";\nimport {\n  AnimatedIcon,\n  arrowAnimation,\n  inputAnimation,\n  inputAnimationWidth,\n  animatedTransition,\n  animatedTransitionReset,\n} from \"./SearchAnimation\";\nimport { updateSearchHistory } from \"../../api/search\";\nimport colors from \"../../styles/colors\";\n\nexport default function Search(props) {\n  const { currentSearch } = props;\n  const [searchQuery, setSearchQuery] = useState(currentSearch || \"\");\n  const [showHistory, setShowHistory] = useState(false);\n  const [containerHeight, setContainerHeight] = useState(0);\n  const onChangeSearch = (query) => setSearchQuery(query);\n  const navigation = useNavigation();\n  const route = useRoute();\n\n  useEffect(() => {\n    if (currentSearch !== searchQuery) setSearchQuery(currentSearch);\n  }, [currentSearch]);\n\n  const openSearch = () => {\n    animatedTransition.start();\n    setShowHistory(!showHistory);\n  };\n\n  const closeSearch = () => {\n    animatedTransitionReset.start();\n    Keyboard.dismiss();\n    setShowHistory(!showHistory);\n  };\n\n  const onSearch = async (reuseSearch) => {\n    const isReuse = typeof reuseSearch === \"string\";\n\n    closeSearch();\n    setSearchQuery(\"\");\n    !isReuse && (await updateSearchHistory(searchQuery));\n\n    if (route.name === \"search\") {\n      navigation.push(\"search\", {\n        search: isReuse ? reuseSearch : searchQuery,\n      });\n    } else {\n      navigation.navigate(\"search\", {\n        search: isReuse ? reuseSearch : searchQuery,\n      });\n    }\n  };\n\n  return (\n    <View\n      style={styles.container}\n      onLayout={(e) => setContainerHeight(e.nativeEvent.layout.height)}\n    >\n      <View style={styles.containerInput}>\n        <AnimatedIcon\n          name=\"arrow-left\"\n          size={20}\n          style={[styles.backArrow, arrowAnimation]}\n          onPress={closeSearch}\n        />\n\n        <Animated.View style={[inputAnimation, { width: inputAnimationWidth }]}>\n          <Searchbar\n            placeholder=\"Busca tu producto\"\n            onChangeText={onChangeSearch}\n            value={searchQuery}\n            onFocus={openSearch}\n            onSubmitEditing={onSearch}\n          />\n        </Animated.View>\n      </View>\n      <SearchHistory\n        showHistory={showHistory}\n        containerHeight={containerHeight}\n        onSearch={onSearch}\n      />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: colors.bgDark,\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    zIndex: 1,\n  },\n  containerInput: {\n    position: \"relative\",\n    alignItems: \"flex-end\",\n  },\n  backArrow: {\n    position: \"absolute\",\n    left: 0,\n    top: 15,\n    color: colors.fontLight,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}