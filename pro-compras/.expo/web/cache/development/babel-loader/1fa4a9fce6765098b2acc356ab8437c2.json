{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\anten\\\\OneDrive\\\\Escritorio\\\\Nueva carpeta\\\\pro-compras\\\\src\\\\screens\\\\Account\\\\ChangeName.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useCallback } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { TextInput, Button } from \"react-native-paper\";\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport Toast from \"react-native-root-toast\";\nimport StatusBar from \"../../components/StatusBar\";\nimport { getMeApi, updateUserApi } from \"../../api/user\";\nimport useAuth from \"../../hooks/useAuth\";\nimport colors from \"../../styles/colors\";\nimport { formStyle } from \"../../styles\";\nexport default function ChangeName() {\n  var _useAuth = useAuth(),\n      auth = _useAuth.auth;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var navigation = useNavigation();\n  useFocusEffect(useCallback(function () {\n    (function _callee() {\n      var response;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(getMeApi(auth.token));\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(formik.setFieldValue(\"name\", response.name));\n\n            case 5:\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(formik.setFieldValue(\"lastname\", response.lastname));\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []));\n  var formik = useFormik({\n    initialValues: initialValues(),\n    validationSchema: Yup.object(validationSchema()),\n    onSubmit: function onSubmit(formData) {\n      return _regeneratorRuntime.async(function onSubmit$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n              _context2.prev = 1;\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(updateUserApi(auth, formData));\n\n            case 4:\n              navigation.goBack();\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](1);\n              Toast.show(\"Error al actualizar los datos.\", {\n                position: Toast.positions.CENTER\n              });\n\n            case 10:\n              setLoading(false);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[1, 7]], Promise);\n    }\n  });\n  return React.createElement(React.Fragment, null, React.createElement(StatusBar, {\n    backgroundColor: \"#c2303f\",\n    barStyle: \"light-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, React.createElement(TextInput, {\n    label: \"Nombre\",\n    style: formStyle.input,\n    onChangeText: function onChangeText(text) {\n      return formik.setFieldValue(\"name\", text);\n    },\n    value: formik.values.name,\n    error: formik.errors.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), React.createElement(TextInput, {\n    label: \"Apellidos\",\n    style: formStyle.input,\n    onChangeText: function onChangeText(text) {\n      return formik.setFieldValue(\"lastname\", text);\n    },\n    value: formik.values.lastname,\n    error: formik.errors.lastname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), React.createElement(Button, {\n    mode: \"contained\",\n    style: formStyle.btnSucces,\n    onPress: formik.handleSubmit,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Cambiar nombre y apellidos\")));\n}\n\nfunction initialValues() {\n  return {\n    name: \"\",\n    lastname: \"\"\n  };\n}\n\nfunction validationSchema() {\n  return {\n    name: Yup.string().required(true),\n    lastname: Yup.string().required(true)\n  };\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    padding: 20\n  }\n});","map":{"version":3,"sources":["C:/Users/anten/OneDrive/Escritorio/Nueva carpeta/pro-compras/src/screens/Account/ChangeName.js"],"names":["React","useState","useCallback","TextInput","Button","useFocusEffect","useNavigation","useFormik","Yup","Toast","StatusBar","getMeApi","updateUserApi","useAuth","colors","formStyle","ChangeName","auth","loading","setLoading","navigation","token","response","formik","setFieldValue","name","lastname","initialValues","validationSchema","object","onSubmit","formData","goBack","show","position","positions","CENTER","styles","container","input","text","values","errors","btnSucces","handleSubmit","string","required","StyleSheet","create","padding"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\nimport { TextInput, Button } from \"react-native-paper\";\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport Toast from \"react-native-root-toast\";\nimport StatusBar from \"../../components/StatusBar\";\nimport { getMeApi, updateUserApi } from \"../../api/user\";\nimport useAuth from \"../../hooks/useAuth\";\nimport colors from \"../../styles/colors\";\nimport { formStyle } from \"../../styles\";\n\nexport default function ChangeName() {\n  const { auth } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const navigation = useNavigation();\n\n  useFocusEffect(\n    useCallback(() => {\n      (async () => {\n        const response = await getMeApi(auth.token);\n        await formik.setFieldValue(\"name\", response.name);\n        await formik.setFieldValue(\"lastname\", response.lastname);\n      })();\n    }, [])\n  );\n\n  const formik = useFormik({\n    initialValues: initialValues(),\n    validationSchema: Yup.object(validationSchema()),\n    onSubmit: async (formData) => {\n      setLoading(true);\n      try {\n        await updateUserApi(auth, formData);\n        navigation.goBack();\n      } catch (error) {\n        Toast.show(\"Error al actualizar los datos.\", {\n          position: Toast.positions.CENTER,\n        });\n      }\n      setLoading(false);\n    },\n  });\n\n  return (\n    <>\n      <StatusBar backgroundColor=\"#c2303f\" barStyle=\"light-content\" />\n      <View style={styles.container}>\n        <TextInput\n          label=\"Nombre\"\n          style={formStyle.input}\n          onChangeText={(text) => formik.setFieldValue(\"name\", text)}\n          value={formik.values.name}\n          error={formik.errors.name}\n        />\n        <TextInput\n          label=\"Apellidos\"\n          style={formStyle.input}\n          onChangeText={(text) => formik.setFieldValue(\"lastname\", text)}\n          value={formik.values.lastname}\n          error={formik.errors.lastname}\n        />\n        <Button\n          mode=\"contained\"\n          style={formStyle.btnSucces}\n          onPress={formik.handleSubmit}\n          loading={loading}\n        >\n          Cambiar nombre y apellidos\n        </Button>\n      </View>\n    </>\n  );\n}\n\nfunction initialValues() {\n  return {\n    name: \"\",\n    lastname: \"\",\n  };\n}\n\nfunction validationSchema() {\n  return {\n    name: Yup.string().required(true),\n    lastname: Yup.string().required(true),\n  };\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    padding: 20,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}