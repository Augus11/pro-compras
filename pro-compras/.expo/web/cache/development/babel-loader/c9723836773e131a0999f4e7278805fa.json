{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Patricia\\\\Desktop\\\\Nueva carpeta\\\\pro-compras\\\\src\\\\components\\\\Product\\\\Favorite.js\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Button } from \"react-native-paper\";\nimport { size } from \"lodash\";\nimport useAuth from \"../../hooks/useAuth\";\nimport { addFavoriteApi, isFavoriteApi, deleteFavoriteApi } from \"../../api/favorite\";\nexport default function Actions(props) {\n  var product = props.product;\n\n  var _useAuth = useAuth(),\n      auth = _useAuth.auth;\n\n  var _useState = useState(undefined),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFavorite = _useState2[0],\n      setIsFavorite = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      reloadFavorite = _useState6[0],\n      setReloadFavorite = _useState6[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var response;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(isFavoriteApi(auth, product._id));\n\n            case 2:\n              response = _context.sent;\n              if (size(response) === 0) setIsFavorite(false);else setIsFavorite(true);\n              setReloadFavorite(false);\n              setLoading(false);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, [product, reloadFavorite]);\n\n  var addFavorite = function addFavorite() {\n    return _regeneratorRuntime.async(function addFavorite$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (loading) {\n              _context2.next = 5;\n              break;\n            }\n\n            setLoading(true);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(addFavoriteApi(auth, product._id));\n\n          case 4:\n            setReloadFavorite(true);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var deleteFavorite = function deleteFavorite() {\n    return _regeneratorRuntime.async(function deleteFavorite$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (loading) {\n              _context3.next = 5;\n              break;\n            }\n\n            setLoading(true);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(deleteFavoriteApi(auth, product._id));\n\n          case 4:\n            setReloadFavorite(true);\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (isFavorite === undefined) return null;\n  return React.createElement(Button, {\n    mode: \"contained\",\n    contentStyle: isFavorite ? styles.btnDeleteFavoritesContent : styles.btnAddFavoritesContent,\n    labelStyle: styles.btnLabel,\n    style: styles.btn,\n    onPress: isFavorite ? deleteFavorite : addFavorite,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, isFavorite ? \"Eliminar de favoritos\" : \"Añadir a favoritos\");\n}\nvar styles = StyleSheet.create({\n  btnLabel: {\n    fontSize: 18\n  },\n  btn: {\n    marginTop: 20\n  },\n  btnAddFavoritesContent: {\n    backgroundColor: \"#057b00\",\n    paddingVertical: 5\n  },\n  btnDeleteFavoritesContent: {\n    backgroundColor: \"#c40000\",\n    paddingVertical: 5\n  }\n});","map":{"version":3,"sources":["C:/Users/Patricia/Desktop/Nueva carpeta/pro-compras/src/components/Product/Favorite.js"],"names":["React","useState","useEffect","Button","size","useAuth","addFavoriteApi","isFavoriteApi","deleteFavoriteApi","Actions","props","product","auth","undefined","isFavorite","setIsFavorite","loading","setLoading","reloadFavorite","setReloadFavorite","_id","response","addFavorite","deleteFavorite","styles","btnDeleteFavoritesContent","btnAddFavoritesContent","btnLabel","btn","StyleSheet","create","fontSize","marginTop","backgroundColor","paddingVertical"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { Button } from \"react-native-paper\";\nimport { size } from \"lodash\";\nimport useAuth from \"../../hooks/useAuth\";\nimport {\n  addFavoriteApi,\n  isFavoriteApi,\n  deleteFavoriteApi,\n} from \"../../api/favorite\";\n\nexport default function Actions(props) {\n  const { product } = props;\n  const { auth } = useAuth();\n  const [isFavorite, setIsFavorite] = useState(undefined);\n  const [loading, setLoading] = useState(false);\n  const [reloadFavorite, setReloadFavorite] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      const response = await isFavoriteApi(auth, product._id);\n      if (size(response) === 0) setIsFavorite(false);\n      else setIsFavorite(true);\n\n      setReloadFavorite(false);\n      setLoading(false);\n    })();\n  }, [product, reloadFavorite]);\n\n  const addFavorite = async () => {\n    if (!loading) {\n      setLoading(true);\n      await addFavoriteApi(auth, product._id);\n      setReloadFavorite(true);\n    }\n  };\n\n  const deleteFavorite = async () => {\n    if (!loading) {\n      setLoading(true);\n      await deleteFavoriteApi(auth, product._id);\n      setReloadFavorite(true);\n    }\n  };\n\n  if (isFavorite === undefined) return null;\n\n  return (\n    <Button\n      mode=\"contained\"\n      contentStyle={\n        isFavorite\n          ? styles.btnDeleteFavoritesContent\n          : styles.btnAddFavoritesContent\n      }\n      labelStyle={styles.btnLabel}\n      style={styles.btn}\n      onPress={isFavorite ? deleteFavorite : addFavorite}\n      loading={loading}\n    >\n      {isFavorite ? \"Eliminar de favoritos\" : \"Añadir a favoritos\"}\n    </Button>\n  );\n}\n\nconst styles = StyleSheet.create({\n  btnLabel: {\n    fontSize: 18,\n  },\n  btn: {\n    marginTop: 20,\n  },\n  btnAddFavoritesContent: {\n    backgroundColor: \"#057b00\",\n    paddingVertical: 5,\n  },\n  btnDeleteFavoritesContent: {\n    backgroundColor: \"#c40000\",\n    paddingVertical: 5,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}